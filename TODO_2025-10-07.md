# TODO List - October 7, 2025

## ✅ COMPLETED: Sniffing Bout Export and Consolidation

### 1. ✅ Add Sniffing Bout Data to CSV Export
**Status**: COMPLETED (v1.0.3)
- Added sniffing regions to NPZ bundle
- Added sniffing events to events.csv
- Added breath classification columns: `is_sniffing`, `is_eupnea`, `is_apnea` to _breaths.csv
- Added Shift+click to delete sniffing regions

### 2. ✅ Add Sniffing Consolidation to Curation Tab
**Status**: COMPLETED (v1.0.3)
- Sniffing events automatically included in events sheet (no separate processing needed)
- Added sniffing bout timeline chart to events sheet in consolidated Excel
- Chart positioned alongside eupnea and apnea charts

### 3. ✅ Ensure Backward Compatibility
**Status**: COMPLETED (v1.0.3)
- Tested with old files - works without errors
- Graceful handling of missing sniffing data

---

## MEDIUM PRIORITY

### 4. Add Help Button with Usage Instructions
**Goal**: Add a Help button that shows a popup dialog explaining key features and keyboard shortcuts

**Tasks**:
- [ ] Add Help button to main UI (near top controls)
- [ ] Create popup dialog (QMessageBox or custom QDialog)
- [ ] Document key features:
  - **Add Peak**: Click to add, Shift to delete
  - **Delete Peak**: Click near peak (±80ms), Shift to switch to Add mode
  - **Add Sigh**: Click on peak, Ctrl from any mode to switch
  - **Mark Sniffing**: Click-drag to mark region, Shift+click to delete
  - Navigation shortcuts and other useful tips
- [ ] Test dialog appearance and readability

**Files to modify**:
- `ui/pleth_app_layout_02_horizontal.ui` (add Help button)
- `main.py` (create help dialog method and connect button)

**Estimated time**: 1-2 hours

---

### 5. ✅ MainPlot Resizing
**Status**: COMPLETED (Oct 7, 2025)

**Solution**: Used vertical and horizontal spacers in Qt Designer
- MainPlot now expands properly with window resize
- Key learning: Proper use of spacers and careful selection of layout groups in Qt Designer

---

## LOW PRIORITY

### 6. Documentation Updates
- [ ] Update `CLAUDE.md` with sniffing feature implementation details
- [ ] Update `CLAUDE.md` with recent spectral analysis changes
- [ ] Create user-facing documentation/manual

---

## Notes
- **Sniffing implementation complete** (v1.0.3):
  - Stored in `state.sniff_regions_by_sweep` as dict[int, list[tuple[float, float]]]
  - Export: Added to events.csv and NPZ bundle
  - Consolidation: Automatically included in events sheet with timeline chart
  - Keyboard shortcuts: Shift+click to delete regions

**Remaining estimated time**: ~3-5 hours (Help button + documentation updates)
